{% extends 'base.html' %}
{% load static %}

{% block style %}
    <link rel="stylesheet" href="{% static "css/movie-page.css" %}">
{% endblock %}

{% block title %}{{ movie.name }}{% endblock %}

{% block content %}
    <div id="movie-container">    
        <aside id="col1">
            <div class="poster-container">
                <img src="{{ movie.poster.url }}" alt="poster">
            </div>
            {% if movie.trailer_link %}
                <a href="{{ movie.trailer_link }}" target="_blank" class="trailer-link">Watch Trailer</a>
            {% endif %}
        </aside>
        <main id="col2">
            <div class="info-container">
                <h1>{{ movie.name|upper }}</h1>
                <p>Age restrictions: {{ movie.age_restrictions }}+</p>
                <p>Year: <span class="movie-data">{{ movie.year }}</span></p>
                <p>Original name: <span class="movie-data">{{ movie.original_name }}</span></p>
                <p>Director: <span class="movie-data">{{ movie.director }}</span></p>
                <p>Language: <span class="movie-data">{{ movie.language }}</span></p>
                <p>Genre: 
                    {% for genre in movie.genre.all %}
                        <a href="{% url 'movies-by-genre' genre_name=genre.name %}" class="genre-link">{{ genre.name }}</a>
                    {% endfor %}
                </p>
                <p>Duration: <span class="movie-data">{{ movie.duration }}</span></p>
                <p>Country: <span class="movie-data">{{ movie.country }}</span></p>
                <p>Production studio: <span class="movie-data">{{ movie.studio }}</span></p>
                {% if movie.starring.length > 0 %}
                    <p>Screenplay: 
                        {% for writer in movie.screenplay.all %}
                            <span class="movie-data">{{ writer }}</span>
                        {% endfor %}
                    </p>
                {% endif %}
                {% if movie.starring.length > 0 %}
                <p>Starring: 
                    {% for star in movie.starring.all %}
                        <span class="movie-data">{{ star }}</span>
                    {% endfor %}
                </p>
                {% endif %}
            </div>
            <p id="description">{{ movie.description }}</p>
        </main>
        <aside id="col3">
            <h3 style="text-align: center; margin: 1rem 0; color: #ffd700; font-size: 1.4rem;">SCHEDULE</h3>

            {% if sessions_by_hall %}
                <div class="schedule-container">
                    {% for hall_name, sessions in sessions_by_hall.items %}
                        <div class="hall-block">
                            <div class="hall-name">{{ hall_name }}</div>
                            <div class="time-links">
                                {% for session in sessions %}
                                    <a href="{% url 'hall' session.id %}" class="time-link">
                                        {{ session.start_time|time:"H:i" }}
                                    </a>
                                {% endfor %}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <p style="text-align: center; color: #aaa; margin-top: 2rem;">No sessions today</p>
            {% endif %}
        </aside>
    </div>
{% endblock %}
